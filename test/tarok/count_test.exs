defmodule Tarok.CountTest do
  use ExUnit.Case

  @cases [
    {
      [
        :c7,
        :c8,
        :c9,
        :c10,
        :cJ,
        :cC,
        :cQ,
        :cK,
        :h4,
        :h3,
        :h2,
        :h1,
        :hJ,
        :hC,
        :hQ,
        :hK,
        :s7,
        :s8,
        :s9,
        :s10,
        :sJ,
        :sC,
        :sQ,
        :sK,
        :d4,
        :d3,
        :d2,
        :d1,
        :dJ,
        :dC,
        :dQ,
        :dK,
        :i,
        :ii,
        :iii,
        :iiii,
        :v,
        :vi,
        :vii,
        :viii,
        :ix,
        :x,
        :xi,
        :xii,
        :xiii,
        :xiv,
        :xv,
        :xvi,
        :xvii,
        :xviii,
        :xix,
        :xx,
        :xxi,
        :fool
      ],
      70
    },
    {
      [:c7, :h4, :h3],
      1
    },
    {
      [:cK, :h4],
      5
    },
    {
      [:i, :xxi, :fool],
      13
    },
    {
      [:cC, :cQ, :cK],
      10
    },
    {
      [:sJ, :dJ, :cJ],
      4
    },
    {
      [
        :c7,
        :c8,
        :c10,
        :cJ,
        :cC,
        :cQ,
        :h3,
        :h2,
        :h1,
        :hQ,
        :hK,
        :s7,
        :s10,
        :sJ,
        :sC,
        :sQ,
        :sK,
        :d4,
        :d3,
        :dJ,
        :dC,
        :dQ,
        :dK,
        :i,
        :ii,
        :iii,
        :iiii,
        :v,
        :viii,
        :ix,
        :x,
        :xx,
        :xxi,
        :fool
      ],
      56
    },
    {
      [
        :c7,
        :c8,
        :h4,
        :h1,
        :hJ,
        :hC,
        :s7,
        :s8,
        :s9,
        :s10,
        :sJ,
        :d4,
        :d3,
        :dK,
        :viii,
        :ix,
        :x,
        :xi,
        :xii,
        :xiii,
        :xiv,
      ],
      15
    }
  ]

  test "all cards should have value of 70" do
    Enum.each(
      @cases,
      fn {set, score} ->
        # Lets shuffle cards a bit. The result should always be the same.
        Enum.each(1..5, fn _ ->
          assert score == set |> Enum.shuffle() |> Tarok.Count.get_score()
        end)
      end
    )
  end
end
